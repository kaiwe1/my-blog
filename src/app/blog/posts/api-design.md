---
title: 'API设计最佳实践'
slug: 'api-design'
date: '2025-06-20'
tag: ['backend']
description: '服务向外提供接口的设计准则'
---

## 接口设计层面
### 接口定义
- 请求方式: HTTP或RPC接口
- 请求方法: HTTP下的POST/GET
- 请求参数: 
  - 入参设计符合业务需要
  - 出参格式统一, 如包含 code、message、data
  - 错误码规范, 如 200、400、500等

### 版本控制
- 提供版本号: 如 `/api/v1/trendData` 或 `/getTrendDataV1` 方便未来升级

## 安全性层面
### 身份验证
- BA鉴权
- 登录态校验 (常通过统一网关校验SSO Cookie)

### 权限控制
- 不同用户/应用只能访问自己权限内的资源, 简单情况下, 用户/应用应该只能访问自己的资源

## 稳定性与性能层面
### 超时与重试机制
- 明确接口的响应超时时间, 避免堵塞整条API调用链路

### 幂等性
- POST 接口（比如支付）提供幂等保证，对于服务端处理过的请求，不重复处理。避免重复写入、发多条消息、重复支付等副作用。

### 限流
- 使用消息队列(MQ)对接口进行限流

## 日志与监控
### 日志记录
- 记录请求参数、响应体
- 使用 traceId 追踪具体请求

### 告警
- 异常情况需自动告警




